<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.13">
  <compounddef id="group__stream__seeking" kind="group">
    <compoundname>stream_seeking</compoundname>
    <title>Seeking</title>
      <sectiondef kind="user-defined">
      <header>Functions for seeking in Opus streams</header>
      <description><para>These functions let you seek in Opus streams, if the underlying source support it. Seeking is implemented for all built-in stream I/O routines, though some individual sources may not be seekable (pipes, live HTTP streams, or HTTP streams from a server that does not support <computeroutput>Range</computeroutput> requests).</para><para><ref refid="group__stream__seeking_1gaf83b0fc6cdf94508876a206ab980851a" kindref="member">op_raw_seek()</ref> is the fastest: it is guaranteed to perform at most one physical seek, but, since the target is a byte position, makes no guarantee how close to a given time it will come. <ref refid="group__stream__seeking_1gad4f20d0601c2bab8d724f647673ae92c" kindref="member">op_pcm_seek()</ref> provides sample-accurate seeking. The number of physical seeks it requires is still quite small (often 1 or 2, even in highly variable bitrate streams).</para><para>Seeking in Opus requires decoding some pre-roll amount before playback to allow the internal state to converge (as if recovering from packet loss). This is handled internally by <computeroutput>libopusfile</computeroutput>, but means there is little extra overhead for decoding up to the exact position requested (since it must decode some amount of audio anyway). It also means that decoding after seeking may not return exactly the same values as would be obtained by decoding the stream straight through. However, such differences are expected to be smaller than the loss introduced by Opus&apos;s lossy compression. </para></description>
      <memberdef kind="function" id="group__stream__seeking_1gaf83b0fc6cdf94508876a206ab980851a" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int op_raw_seek</definition>
        <argsstring>(OggOpusFile *_of, opus_int64 _byte_offset) OP_ARG_NONNULL(1)</argsstring>
        <name>op_raw_seek</name>
        <param>
          <type>OggOpusFile *</type>
          <declname>_of</declname>
        </param>
        <param>
          <type>opus_int64</type>
          <declname>_byte_offset</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Seek to a byte offset relative to the <bold>compressed</bold> data. This also scans packets to update the PCM cursor. It will cross a logical bitstream boundary, but only if it can&apos;t get any packets out of the tail of the link to which it seeks. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>_of</parametername>
</parameternamelist>
<parameterdescription>
<para>The <computeroutput>OggOpusFile</computeroutput> in which to seek. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>_byte_offset</parametername>
</parameternamelist>
<parameterdescription>
<para>The byte position to seek to. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 on success, or a negative error code on failure. </para></simplesect>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername><ref refid="group__error__codes_1ga3ad48a4f99b1bed72acec552296dfc08" kindref="member">OP_EREAD</ref></parametername>
</parameternamelist>
<parameterdescription>
<para>The underlying seek operation failed. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername><ref refid="group__error__codes_1gae0879acafe9cc0ab72462d291fdb6fb6" kindref="member">OP_EINVAL</ref></parametername>
</parameternamelist>
<parameterdescription>
<para>The stream was only partially open, or the target was outside the valid range for the stream. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername><ref refid="group__error__codes_1gadd54f4d82cfabedb5963331fbe0bc99c" kindref="member">OP_ENOSEEK</ref></parametername>
</parameternamelist>
<parameterdescription>
<para>This stream is not seekable. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername><ref refid="group__error__codes_1gaf7b58a439a471366e9eb5b8f2a8cd041" kindref="member">OP_EBADLINK</ref></parametername>
</parameternamelist>
<parameterdescription>
<para>Failed to initialize a decoder for a stream for an unknown reason. </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="includes/personnal/opusfile.h" line="1625" column="1"/>
      </memberdef>
      <memberdef kind="function" id="group__stream__seeking_1gad4f20d0601c2bab8d724f647673ae92c" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int op_pcm_seek</definition>
        <argsstring>(OggOpusFile *_of, ogg_int64_t _pcm_offset) OP_ARG_NONNULL(1)</argsstring>
        <name>op_pcm_seek</name>
        <param>
          <type>OggOpusFile *</type>
          <declname>_of</declname>
        </param>
        <param>
          <type>ogg_int64_t</type>
          <declname>_pcm_offset</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Seek to the specified PCM offset, such that decoding will begin at exactly the requested position. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>_of</parametername>
</parameternamelist>
<parameterdescription>
<para>The <computeroutput>OggOpusFile</computeroutput> in which to seek. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>_pcm_offset</parametername>
</parameternamelist>
<parameterdescription>
<para>The PCM offset to seek to. This is in samples at 48 kHz relative to the start of the stream. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 on success, or a negative value on error. </para></simplesect>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername><ref refid="group__error__codes_1ga3ad48a4f99b1bed72acec552296dfc08" kindref="member">OP_EREAD</ref></parametername>
</parameternamelist>
<parameterdescription>
<para>An underlying read or seek operation failed. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername><ref refid="group__error__codes_1gae0879acafe9cc0ab72462d291fdb6fb6" kindref="member">OP_EINVAL</ref></parametername>
</parameternamelist>
<parameterdescription>
<para>The stream was only partially open, or the target was outside the valid range for the stream. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername><ref refid="group__error__codes_1gadd54f4d82cfabedb5963331fbe0bc99c" kindref="member">OP_ENOSEEK</ref></parametername>
</parameternamelist>
<parameterdescription>
<para>This stream is not seekable. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername><ref refid="group__error__codes_1gaf7b58a439a471366e9eb5b8f2a8cd041" kindref="member">OP_EBADLINK</ref></parametername>
</parameternamelist>
<parameterdescription>
<para>We failed to find data we had seen before, or the bitstream structure was sufficiently malformed that seeking to the target destination was impossible. </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="includes/personnal/opusfile.h" line="1641" column="1"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
  </compounddef>
</doxygen>
